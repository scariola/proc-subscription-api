<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	<sub-flow name="common-validate-subscription-request-subflow" doc:id="0f3abb99-9601-42a1-b37c-d81f79f8d2ac" >
		<logger level="INFO" doc:name="START - Validation Process" doc:id="52ef1e8a-498f-4c7c-9803-b8a26dbf1fc0" message="START - STEP 2: RECEIVE &amp; VALIDATE REQUEST " />
		<ee:transform doc:name="var-formattedSubscriberData" doc:id="32739979-922f-4c1e-8bbc-fec8ac2686b4">
			<ee:message>
			</ee:message>
			<ee:variables>
				<ee:set-variable resource="dw/vars-formattedSubscriberData.dwl" variableName="formattedSubscriberData" />
			</ee:variables>
		</ee:transform>
		<choice doc:name="CONTAINS Invalid Keword?" doc:id="83d9946e-322c-4828-9225-80dbb4fa660b">
			<when expression="#[vars.formattedSubscriberData.keyword == 'INVALID']">
				<ee:transform doc:name="var-spielType" doc:id="148163e3-1147-4ee9-a42f-99ca41134159">
					<ee:message>
					</ee:message>
					<ee:variables >
						<ee:set-variable resource="dw/var-spielType-invalid-keyword.dwl" variableName="spielType" />
					</ee:variables>
				</ee:transform>
				<raise-error doc:name="Raise Error - Invalid Keyword" doc:id="9908a27a-539c-4bda-a8dc-fc787cf0449b" type="INPUT:INVALID_KEYWORD" description="Invalid SMS keyword provided" />
			</when>
			<otherwise>
				<logger level="INFO" doc:name="Proceed to next step" doc:id="cd853372-e413-472d-8bbf-eb0405150e91" message="Proceed to next step." />
			</otherwise>
		</choice>
		<logger level="INFO" doc:name="END - Validation Process" doc:id="cd21b076-f794-4035-bee8-2a22bbfd3b51" message="END - STEP 2: RECEIVE &amp; VALIDATE REQUEST" />
	</sub-flow>
</mule>
