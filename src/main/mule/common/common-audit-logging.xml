<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd">
	
	<sub-flow name="common-set-success-audit-log-subflow" doc:id="a475d027-9214-4f36-b297-81f6b204da64">
		<flow-ref doc:name="common-get-spiel-subflow" doc:id="abfef517-5fe3-41c5-8adf-1974d1a43178" name="common-get-spiel-subflow"/>
		<ee:transform doc:name="var-auditLog(success)" doc:id="3d9f82d8-b3ed-4a67-b64d-58e49556c1a4" >
			<ee:message >
			</ee:message>
			<ee:variables >
				<ee:set-variable variableName="auditLog" ><![CDATA[%dw 2.0
output application/json
---
{
    "success": 1,
    "hasProcessorError": 0
}]]></ee:set-variable>
			</ee:variables>
		</ee:transform>
		<flow-ref doc:name="impl-put-audit-subflow" doc:id="0cce63f4-e354-4213-8ef6-6841da4a57d8" name="impl-put-audit-subflow"/>
		<flow-ref doc:name="impl-sms-flow" doc:id="aef14663-0692-4659-8b8e-57b3e0f3f39a" name="impl-post-sms-subflow"/>

</sub-flow>
	<sub-flow name="common-set-error-audit-log-subflow" doc:id="42d4234d-ce14-4d0f-b20c-b0b1bbe21477" >
		<flow-ref doc:name="common-get-spiel-subflow" doc:id="88abe5cd-f7ee-4ea2-8885-f70b855c5181" name="common-get-spiel-subflow" />
		<ee:transform doc:name="var-auditLog(has error)" doc:id="c4df6df5-c099-43a0-a839-f3b3e66a47a8" >
			<ee:message />
			<ee:variables >
				<ee:set-variable variableName="auditLog" ><![CDATA[%dw 2.0
output application/json
---
{
    "success": 0,
    "hasProcessorError": 1
}]]></ee:set-variable>
			</ee:variables>
		</ee:transform>
		<flow-ref doc:name="impl-put-audit-flow" doc:id="1a109d87-496d-40ed-b913-cb799158cc33" name="impl-put-audit-subflow" />
		<flow-ref doc:name="impl-post-sms-flow" doc:id="ac718b9d-e44d-410f-90eb-96a396306507" name="impl-post-sms-subflow" />
	</sub-flow>
	
	
</mule>
